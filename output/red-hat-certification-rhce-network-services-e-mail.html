<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Red Hat Certification – RHCE – Network Services – e-mail | There is IT in Helsinki
</title>
  <link rel="canonical" href="/red-hat-certification-rhce-network-services-e-mail.html">


  <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="/theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="/theme/css/theme.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="/atom.xml">
  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="/it.atom.xml">  
  <meta name="description" content="1st post - System Management and Configuration Objectives Network services Network services are an important subset of the exam objectives. RHCE candidates should be capable of meeting the following objectives for each of the network services listed below: Install the packages needed to provide the service. Configure SELinux to support the …">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="/">
        <img class="img-fluid rounded" src=/images/blog_site_image.png alt="There is IT in Helsinki">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="/">There is IT in Helsinki</a></h1>
      <ul class="list-inline">
          <li class="list-inline-item"><a href="/tags/" target="_blank">tags</a></li>
          <li class="list-inline-item"><a href="/categories/" target="_blank">categories</a></li>
            <li class=" list-inline-item text-muted">|</li>
          <li class="list-inline-item"><a class="fab fa-twitter" href="https://twitter.com/martbhell" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fas fa-rss" href="/atom.xml" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-github" href="https://github.com/martbhell" target="_blank"></a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Red Hat Certification – RHCE – Network Services – e-mail
</h1>
      <hr>
  <article class="article">
    <header>
      <ul class="list-inline">
        <li class="list-inline-item text-muted" title="2012-06-04T00:00:00+03:00">
          <i class="fas fa-clock"></i>
          2012-06-04
        </li>
        <li class="list-inline-item">
          <i class="fas fa-folder-open"></i>
          <a href="/category/it.html">it</a>
        </li>
          <li class="list-inline-item">
            <i class="fas fa-tag"></i>
              <a href="/tag/centos.html">#centos</a>,               <a href="/tag/certification.html">#certification</a>,               <a href="/tag/dovecot.html">#dovecot</a>,               <a href="/tag/file.html">#file</a>,               <a href="/tag/transfer.html">#transfer</a>,               <a href="/tag/imap.html">#imap</a>,               <a href="/tag/linux.html">#linux</a>,               <a href="/tag/postfix.html">#postfix</a>,               <a href="/tag/red.html">#red</a>,               <a href="/tag/hat.html">#hat</a>,               <a href="/tag/rhce.html">#rhce</a>,               <a href="/tag/sendmail.html">#sendmail</a>,               <a href="/tag/smtp.html">#smtp</a>,               <a href="/tag/studying.html">#studying</a>          </li>
      </ul>
    </header>
    <div class="content">
      <p><a href="http://www.guldmyr.com/red-hat-certification-rhce-system-configuration-and-management-2/" title="1st post">1st post</a> - System Management and Configuration</p>
<p><a href="https://www.redhat.com/training/courses/ex300/examobjective" title="on redhat.com">Objectives</a></p>
<h1 id="network-services">Network services</h1>
<p>Network services are an important subset of the exam objectives. RHCE candidates should be capable of meeting the following objectives for each of the network services listed below:</p>
<ul>
<li>Install the packages needed to provide the service.</li>
<li>Configure SELinux to support the service.</li>
<li>Configure the service to start when the system is booted.</li>
<li>Configure the service for basic operation.</li>
<li>Configure host-based and user-based security for the service.</li>
</ul>
<p>User should be able to do the following for all these services:</p>
<ul>
<li><a href="https://guldmyr.com/red-hat-certification-rhce-network-services-httpd">http/https</a></li>
<li><a href="https://guldmyr.com/red-hat-certification-rhce-network-services-dns">dns</a></li>
<li><a href="http://www.guldmyr.com/red-hat-certification-rhce-network-services-ftp">ftp</a></li>
<li><a href="http://www.guldmyr.com/red-hat-certification-rhce-network-services-nfs/">nfs</a></li>
<li><a href="http://www.guldmyr.com/red-hat-certification-rhce-network-services-smb/">smb</a></li>
<li><a href="http://www.guldmyr.com/red-hat-certification-rhce-network-services-e-mail/">smtp</a></li>
<li>ssh</li>
<li>ntp</li>
</ul>
<h2 id="smtp">SMTP:</h2>
<p>Hackmode has a <a href="http://www.hackmode.net/?page_id=80" title="on hackmode.net">good article</a> about setting postfix for the first time.</p>
<p>To test that e-mail is working you can - tada - use an e-mail client.</p>
<p>You have lots of details in /usr/share/doc/postfix-N ( the path should be in /etc/postfix/main.cf )</p>
<ul>
<li>
<p>Install the packages needed to provide the service.</p>
</li>
<li>
<p>yum install postfix</p>
</li>
<li>
<p>Configure SELinux to support the service</p>
</li>
<li>
<p>getsebool -a|grep postfix</p>
</li>
<li>
<p>Configure the service to start when the system is booted.</p>
</li>
<li>
<p>chkconfig postfix on</p>
</li>
<li>
<p>Configure the service for basic operation.</p>
</li>
<li>
<p>set hostname to host.example.com</p>
</li>
<li>
<p>/etc/postfix/main.cf and define (this assumes hostname is host.example.com):</p>
</li>
<li>
<p>myhostname = host.example.com</p>
</li>
<li>mydomain = example.com</li>
<li>myorigin = $mydomain</li>
<li>inet_interfaces = all</li>
<li>mydestination = add $mydomain to the default one</li>
<li>home_mailbox = Maildir/</li>
<li>Update firewall to allow port 25 tcp</li>
<li>
<p>Test with: nc localhost 25</p>
</li>
<li>
<p>Configure host-based and user-based security for the service</p>
</li>
<li>
<p>iptables or $mynetworks in main.cf</p>
</li>
<li>user: postmap</li>
</ul>
<p>In CLI (important to use ' and not "):</p>
<h1 id="hostname-record-the-output-of-this">hostname - record the output of this</h1>
<p>postconf -e 'myhostname = output from hostname in here'</p>
<h1 id="hostname-d">hostname -d</h1>
<p>postconf -e 'mydomain = output from hostname -d in here'
postconf -e 'myorigin = $mydomain'
postconf -e 'inet_interface = all'
postconf -e 'mydestination = $myhostname, localhost, $mydomain'
postconf -e 'mynetworks = 127.0.0.0/8 [::1]/128, /32'
postconf -e 'relay_domains = $mydestination'
postconf -e 'home_mailbox = Maildir/'</p>
<p>To use it:</p>
<p>useradd -s /sbin/nologin labber
passwd labber</p>
<p>Edit /etc/aliases and add:</p>
<p>labber: labber</p>
<p>Then run:</p>
<p>newaliases
service postfix start
service postfix status
netstat -nlp|grep master</p>
<p>Send e-mail:</p>
<p>mail -s "Test e-mail here" labber@mydomain
test123
.</p>
<p>The . at the end is quite nice, that stops the input.</p>
<p>Check e-mail:</p>
<p>cat /home/labber/Maildir/new/*</p>
<h2 id="real-e-mail-client">Real E-mail Client</h2>
<p>But, perhaps you want to check this out with a real e-mail client like thunderbird 10.</p>
<p>For this there needs to be a e-mail server that stores the e-mails on the server.</p>
<p>For this we can use 'dovecot'</p>
<p>yum install dovecot
service dovecot start</p>
<ol>
<li>Update iptables to allow ports 25 and 143 (TCP)</li>
<li>Update main.cf to allow from your IP</li>
<li>Restart services</li>
<li>
<p>Add new account in thunderbird -</p>
</li>
<li>
<p>do use the IP address of your server, not the DNS</p>
</li>
<li>do not use SMTP security (or username), but use password authentication</li>
<li>do use IMAP STARTTLS security, username: labber, password auth</li>
</ol>
<p>Thunderbird is quite nice, it will often tell you which setting is wrong.</p>
<p>You can use /var/log/maillog for details on the server-side (to see if you get connections at all for example).</p>
<h2 id="deny-a-user">Deny a User</h2>
<p>To illustrate this feature we first need to add a second user/e-mail account:</p>
<p>useradd -s /sbin/nologin labrat
passwd labrat
echo "labrat: labrat" &gt;&gt; /etc/aliases
newaliases
service postfix restart
service dovecot restart
mail -s "test" labrat@mydomain</p>
<p>You need to send an e-mail to the e-mail address before you can add it in Thunderbird (because the user does not have a $HOME/Maildir until you do).</p>
<p>After the new user has been created and added to your e-mail client do <a href="http://www.cyberciti.biz/faq/howto-blacklist-reject-sender-email-address/" title="source">the following</a>:</p>
<p>cd /etc/postfix
echo "labber@mydomain REJECT" &gt;&gt; sender_access
postmap hash:sender_access
echo "smtpd_sender_restrictions = check_sender_access hash:/etc/postfix/sender_access" &gt;&gt; /etc/postfix/main.cf
service postfix restart</p>
<p>Try:</p>
<ul>
<li>to send an e-mail from and to both accounts</li>
</ul>
<h2 id="extra">Extra</h2>
<ul>
<li>
<p>Configure a mail transfer agent (MTA) to accept inbound email from other systems.</p>
</li>
<li>
<p>inet_interfaces = all</p>
</li>
<li>
<p>Configure an MTA to forward (<a href="http://www.postfix.org/postconf.5.html#relayhost" title="on postfix.org">relay</a>) email through a smart host.</p>
</li>
<li>
<p>relayhost=hostname.domain.com</p>
</li>
</ul>
<p>If I understand this correctly to setup the above two we would need to have two servers.</p>
    </div>
  </article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
    <li class="list-inline-item"><a href="https://wtangy.se">Was There an NHL Game Yesterday?</a></li>
    <li class="list-inline-item"><a href="/tag/resepti">Recipes in Finnish</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>

</body>

</html>