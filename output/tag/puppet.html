<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>There is IT in Helsinki - puppet</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="There is IT in Helsinki Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">There is IT in Helsinki</a></h1>
                <nav><ul>
                    <li><a href="/category/finland.html">finland</a></li>
                    <li><a href="/category/it.html">it</a></li>
                    <li><a href="/category/storage.html">storage</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/contributing-to-openstack-upstream.html">"Contributing To OpenStack Upstream"</a></h1>
<footer class="post-info">
        <abbr class="published" title="2019-07-22T00:00:00+03:00">
                Published: "2019-07-22"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/backporting.html">backporting</a> <a href="/tag/gerrit.html">gerrit</a> <a href="/tag/git.html">git</a> <a href="/tag/keystone.html">keystone</a> <a href="/tag/openstack.html">openstack</a> <a href="/tag/puppet.html">puppet</a> <a href="/tag/rdo.html">rdo</a> <a href="/tag/vancouver.html">vancouver</a> </p>
</footer><!-- /.post-info --><p>Recently I had the pleasure of <strong>contributing</strong> upstream to the <a href="https://www.openstack.org/">OpenStack</a> project!</p>
<p>A link to my merged patches: <a href="https://review.opendev.org/#/q/owner:+guldmyr+status:merged">https://review.opendev.org/#/q/owner:+guldmyr+status:merged</a></p>
<p>In a previous <a href="https://www.openstack.org/">OpenStack</a> summit (these days called OpenInfra Summits), (Vancouver 2018) I went there a few days early and attended the <strong>Upstream Institute</strong> <a href="https://docs.openstack.org/upstream-training/">https://docs.openstack.org/upstream-training/</a> .<br>
It was 1.5 days long or so if I remember right. Looking up my notes from that these were the highlights:</p>
<ul>
<li>Best way to start getting involved is to attend weekly meetings of projects</li>
<li><strong>Stickersssss</strong></li>
<li>A very similar process to RDO with Gerrit and reviews</li>
<li>Underlying tests are all done with ansible and they have ARA enabled so one gets a nice Web UI to view results afterward. Logs are saved as part of the <a href="http://zuul.openstack.org">Zuul testing</a> too so one can really dig into and see what is tested and if something breaks when it's being tested.</li>
</ul>
<p>Even though my patches were one baby and a bit over 1 year in time after the Upstream Institute I could still f<a href="https://docs.openstack.org/contributors/">igure things out</a> quite quickly with the help of the guides and get bugs created and patches submitted. My general plan when first attending it wasn't to contribute code changes, but rather to start reading code, perhaps find open bugs and so on.</p>
<p>The thing I wanted to change in puppet-keystone was apparently also possible to change in many other puppet-* modules, and less than a day after my puppet-keystone change got merged into master someone else <strong>picked up the torch</strong> and made PRs to like ~15 other repositories with similar changes :) Pretty cool!</p>
<p><strong>Testing</strong> is hard! <a href="https://review.opendev.org/#/c/669045/1">https://review.opendev.org/#/c/669045/1</a> is one backport I created for puppet-keystone/rocky, and the Ubuntu testing was not working initially (started with an APT mirror issue and later it was slow and timed out)... After 20 rechecks and two weeks, it still hadn't successfully passed a test. In the end we got there though with the help of a core reviewer that actually updated some mirror and later disabled some tests :)</p>
<p>Now <strong>the change itself</strong> was about "oslo_middleware/max_request_body_size" So that we can increase it from the default 114688. The Pouta Cloud had issues where our <a href="https://docs.openstack.org/keystone/pike/advanced-topics/federation/configure_federation.html#mapping">Federation User Mappings</a> were larger than 114688 bytes and we coudln't update them anymore, turns out they were blocked by oslo_middleware.</p>
<blockquote>
<p>(<strong>does anybody know where 114688bytes comes</strong> <strong>from</strong>? Some internal speculation has been that it is from 128kilobytes minus some headers)</p>
</blockquote>
<p>Anyway, the mapping we have now is simplified just a long [ list ] of "local_username": "federation_email", domain: "default". I think next step might be to try to figure out if maybe we can make the rules using something like below instead of hardcoding the values into the rules  </p>
<p>"name": "{0}" </p>
<p>It's been quite hard to find examples that are exactly like our use-case (and playing about with is not a priority right now, just something in the backlog, but could be interesting to look at when we start accepting more federations).</p>
<p>All in all, I'm really happy to have gotten to contribute something to the OpenStack ecosystem!</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/taking-puppet-ghostbuster-for-a-spin.html" rel="bookmark"
                           title="Permalink to "Taking puppet-ghostbuster for a spin"">"Taking puppet-ghostbuster for a spin"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-07-18T00:00:00+03:00">
                Published: "2019-07-18"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/hiera.html">hiera</a> <a href="/tag/puppet.html">puppet</a> <a href="/tag/software.html">software</a> <a href="/tag/ssh.html">ssh</a> </p>
</footer><!-- /.post-info -->                <p>We use puppet at $dayjob to configure OpenStack.</p>
<p>I wanted to know if there's a lot of unused code in our manifests!</p>
<p>**From left of stage enters: https://github.com/camptocamp/puppet-ghostbuster **</p>
<p>Step one is to install the puppet modules and gems and whatnot, this blog post was good about …</p>
                <a class="readmore" href="/taking-puppet-ghostbuster-for-a-spin.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/cfengine-some-useful-examples-or-how-i-learnt-about-the-bomb-and-tried-puppet-instead-salt.html" rel="bookmark"
                           title="Permalink to "cfengine - some useful examples / or how I learn't about the bomb and tried Puppet instead / salt?"">"cfengine - some useful examples / or how I learn't about the bomb and tried Puppet instead / salt?"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-11-11T00:00:00+02:00">
                Published: "2012-11-11"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/automation.html">automation</a> <a href="/tag/cfe.html">cfe</a> <a href="/tag/cfengine.html">cfengine</a> <a href="/tag/cms.html">cms</a> <a href="/tag/linux.html">linux</a> <a href="/tag/puppet.html">puppet</a> <a href="/tag/resolv.html">resolv</a> <a href="/tag/conf.html">conf</a> <a href="/tag/resolver.html">resolver</a> <a href="/tag/salt.html">salt</a> <a href="/tag/highstate.html">highstate</a> <a href="/tag/script.html">script</a> <a href="/tag/scripting.html">scripting</a> </p>
</footer><!-- /.post-info -->                <p>Building on the <a href="http://www.guldmyr.com/blog/cfengine-whats-that-all-about/" title="cfengine – what’s that about?">initial post</a> about cfengine we're going to try out some things that may actually be useful.</p>
<p>My goal would be to make /etc/resolv.conf identical between all the machines.</p>
<p>The server setup is the lustre cluster we built in a previous post.</p>
<p>In this post you'll …</p>
                <a class="readmore" href="/cfengine-some-useful-examples-or-how-i-learnt-about-the-bomb-and-tried-puppet-instead-salt.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/hepix-spring-2011-day-2.html" rel="bookmark"
                           title="Permalink to "HEPIX Spring 2011 – Day 2"">"HEPIX Spring 2011 – Day 2"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2011-05-04T00:00:00+03:00">
                Published: "2011-05-04"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/cooling.html">cooling</a> <a href="/tag/cpu.html">cpu</a> <a href="/tag/naming.html">naming</a> <a href="/tag/dell.html">dell</a> <a href="/tag/disk.html">disk</a> <a href="/tag/failures.html">failures</a> <a href="/tag/drupal.html">drupal</a> <a href="/tag/green.html">green</a> <a href="/tag/it.html">it</a> <a href="/tag/cube.html">cube</a> <a href="/tag/heat.html">heat</a> <a href="/tag/exchanger.html">exchanger</a> <a href="/tag/hepix.html">hepix</a> <a href="/tag/spring.html">spring</a> <a href="/tag/2011.html">2011</a> <a href="/tag/hs06.html">hs06</a> <a href="/tag/puppet.html">puppet</a> <a href="/tag/scientific.html">scientific</a> <a href="/tag/computing.html">computing</a> <a href="/tag/synchrotron.html">synchrotron</a> </p>
</footer><!-- /.post-info -->                <p>Guten aben!</p>
<p>Darmstadt is a very beautiful city. It's quite old and there are lots of parks and eh, cool, houses.</p>
<p>A person from the UK said yesterday (in the pub Ratkeller) something like this: <em>"A particle physicist's raison d'être is to find complexities, they wouldn't turn away from one …</em></p>
                <a class="readmore" href="/hepix-spring-2011-day-2.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://wtangy.se">Was There an NHL Game Yesterday?</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/martbhell">martbhell</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>