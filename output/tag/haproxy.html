<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>There is IT in Helsinki - haproxy</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="There is IT in Helsinki Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">There is IT in Helsinki</a></h1>
                <nav><ul>
                    <li><a href="/category/finland.html">finland</a></li>
                    <li><a href="/category/it.html">it</a></li>
                    <li><a href="/category/storage.html">storage</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/haproxy-lab-setup.html">"haproxy lab setup!"</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-08-07T00:00:00+03:00">
                Published: "2017-08-07"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/ansible.html">ansible</a> <a href="/tag/haproxy.html">haproxy</a> <a href="/tag/openstack.html">openstack</a> </p>
</footer><!-- /.post-info --><p>Been seeing haproxy more and more lately as it seems even the stuff I work with are moving towards web :)</p>
<p>So a good time as any to play around with it!</p>
<p>First setup is the tag "single-node" in <a href="https://github.com/martbhell/haproxy-lab">https://github.com/martbhell/haproxy-lab</a> - this means it just configures one apache httpd and one haproxy. In the haproxy it creates multiple vhosts with content being served from different directories, and then it points to each of these as a haproxy backend.</p>
<p>To illustrate the load balancing the playbook also installs php and shows the path of the file that's being served.</p>
<p>I used ansible for this and only tested it with CentOS7 in an OpenStack. The playbook also sets up some "dns" in /etc/hosts.</p>
<p>There are also "ops_playbooks" for disabling/enabling backends and setting weights.</p>
<p>I wonder what's a good next step. Maybe multiple hosts / Docker containers? Maybe SSL termination + letsencrypt? Maybe some <a href="https://medium.freecodecamp.org/how-we-fine-tuned-haproxy-to-achieve-2-000-000-concurrent-ssl-connections-d017e61a4d27">performance benchmarking/tuning</a>? I like the help for the <a href="http://www.haproxy.org/download/1.5/doc/configuration.txt">configuration file</a> - it begins with some detail about what an HTTP request looks like :)</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://wtangy.se">Was There an NHL Game Yesterday?</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/martbhell">martbhell</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>