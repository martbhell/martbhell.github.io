<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>There is IT in Helsinki - iscsi</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="There is IT in Helsinki Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">There is IT in Helsinki</a></h1>
                <nav><ul>
                    <li><a href="/category/finland.html">finland</a></li>
                    <li><a href="/category/it.html">it</a></li>
                    <li><a href="/category/storage.html">storage</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/red-hat-clustering-and-storage-management-course-objectives-part-2.html">"Red Hat – Clustering and Storage Management – Course Objectives - part 2"</a></h1>
<footer class="post-info">
        <abbr class="published" title="2013-08-21T00:00:00+03:00">
                Published: "2013-08-21"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/certification.html">certification</a> <a href="/tag/cluster.html">cluster</a> <a href="/tag/iscsi.html">iscsi</a> <a href="/tag/linux.html">linux</a> <a href="/tag/lvm.html">lvm</a> <a href="/tag/openstack.html">openstack</a> <a href="/tag/red.html">red</a> <a href="/tag/hat.html">hat</a> <a href="/tag/rhce.html">rhce</a> <a href="/tag/storage.html">storage</a> </p>
</footer><!-- /.post-info --><p>Post 1 - <a href="http://www.guldmyr.com/blog/red-hat-clustering-and-storage-management-course-objectives/">http://www.guldmyr.com/blog/red-hat-clustering-and-storage-management-course-objectives/</a> Where I checked out udev, multipathing, iscsi, LVM and xfs.</p>
<p><strong>This</strong> post is about getting using luci/ricci to get a Red Hat cluster working, but not on a RHEL machine because sadly I do not have one available for practice purposes. So CentOS64 it is. Using openstack for virtualization.</p>
<p>Topology: Four hosts on all three networks, -a, -b and internal. Three cluster nodes and one management node.</p>
<p>Get the basic cluster going:</p>
<ul>
<li>image four identical nodes</li>
<li>ssh-key is distributed</li>
<li>/etc/hosts file has all hosts, IPs and networks<ul>
<li>network interfaces are configured -</li>
<li>set a gateway in /etc/sysconfig/network</li>
</ul>
</li>
<li>firewall<ul>
<li>all traffic allowed from -a and -b networks</li>
<li>at a minimum allow traffic from the network that the hostname corresponds to that you enter in luci</li>
</ul>
</li>
<li>dns (PEERDNS=no is good with several dhcp interfaces)</li>
<li>timesync with ntpd</li>
<li>luci installed on mgmt-node # ricci is a web gui</li>
<li>ricci installed on all cluster nodes # this is the service talks with corosync<ul>
<li>password set for user ricci on cluster nodes</li>
</ul>
</li>
<li>create cluster in luci<ul>
<li>multicast perhaps doesn't work so well in openstack ?</li>
<li>on cluster nodes this runs "yum -y install cman rgmanager lvm2-cluster sg3_utils gfs2-utils" if shared storage is selected, probably less if not.</li>
</ul>
</li>
<li>fencing is really important, how to do it in openstack would require a bit of work though. Not as easy as with kvm/xvm to send a destroy domain message.</li>
</ul>
<p>Tests:</p>
<ul>
<li>Update and distribute cluster.conf</li>
<li>Have a service run on a node on the cluster (doesn't have to have a shared storage for this).</li>
<li>Commands:<ul>
<li>clustat</li>
<li>cman_tool</li>
<li>rg_test test /etc/cluster/cluster.conf start service name-of-service</li>
<li>ccs_config_validate</li>
</ul>
</li>
</ul>
<p>Share an iSCSI target between all nodes:</p>
<ul>
<li>Using management node to share the iSCSI LUN.</li>
<li>tgtd, multipath</li>
<li>clvmd running on all nodes</li>
<li>lvmconf - make sure locking is set correctly</li>
<li>create vg with clustering</li>
<li>partprobe; multipath -r # do this often</li>
<li>vgs/lvs and make sure all nodes see the clusterd lv</li>
<li>minimum GFS filesystem is around 128M - you didn't use all the vg right? =)<ul>
<li>for testing/small cluster lowering the journal size is goodness</li>
</ul>
</li>
<li>mount!</li>
</ul>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/red-hat-clustering-and-storage-management-course-objectives.html" rel="bookmark"
                           title="Permalink to "Red Hat - Clustering and Storage Management - Course Objectives"">"Red Hat - Clustering and Storage Management - Course Objectives"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-08-15T00:00:00+03:00">
                Published: "2013-08-15"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/certification.html">certification</a> <a href="/tag/cluster.html">cluster</a> <a href="/tag/iscsi.html">iscsi</a> <a href="/tag/linux.html">linux</a> <a href="/tag/lvm.html">lvm</a> <a href="/tag/openstack.html">openstack</a> <a href="/tag/red.html">red</a> <a href="/tag/hat.html">hat</a> <a href="/tag/rhce.html">rhce</a> <a href="/tag/storage.html">storage</a> </p>
</footer><!-- /.post-info -->                <p>Attending "Red Hat Enterprise Clustering and Storage Management" in August. Quite a few of these technologies I haven't touched upon before so probably best to go through them before the course.</p>
<p>Initially I wonder how many of these are Red Hat specific, or how many of these I can accomplish …</p>
                <a class="readmore" href="/red-hat-clustering-and-storage-management-course-objectives.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/san-primer-introduction-to-data-storage.html" rel="bookmark"
                           title="Permalink to "SAN Primer - Introduction to Data Storage"">"SAN Primer - Introduction to Data Storage"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2011-07-28T00:00:00+03:00">
                Published: "2011-07-28"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/storage.html">storage</a>.</p>
<p>tags: <a href="/tag/data.html">data</a> <a href="/tag/storage.html">storage</a> <a href="/tag/introduction.html">introduction</a> <a href="/tag/iscsi.html">iscsi</a> <a href="/tag/san.html">san</a> <a href="/tag/basics.html">basics</a> <a href="/tag/network.html">network</a> </p>
</footer><!-- /.post-info -->                <p>You may have heard about this storage or SAN stuff, but what is it? Is it complicated and cool? Yes. Now it doesn't have to be complicated, but it sure can be sometimes. This post is just a brief primer/introduction to storage and what it entails. In case maybe …</p>
                <a class="readmore" href="/san-primer-introduction-to-data-storage.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/next-generation-eva-p6000.html" rel="bookmark"
                           title="Permalink to "Next Generation EVA - P6000"">"Next Generation EVA - P6000"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2011-05-03T00:00:00+03:00">
                Published: "2011-05-03"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/disk.html">disk</a> <a href="/tag/array.html">array</a> <a href="/tag/enterprise.html">enterprise</a> <a href="/tag/virtual.html">virtual</a> <a href="/tag/eva.html">eva</a> <a href="/tag/hp.html">hp</a> <a href="/tag/iscsi.html">iscsi</a> <a href="/tag/p6000.html">p6000</a> <a href="/tag/sas.html">sas</a> <a href="/tag/storage.html">storage</a> <a href="/tag/thin.html">thin</a> <a href="/tag/provisioning.html">provisioning</a> </p>
</footer><!-- /.post-info -->                <p>On theregister there was recently <a href="http://www.theregister.co.uk/2011/05/03/hp_fifth_gen_eva/" title="on theregister">a post</a> that maybe HP will announce the new EVA's in Vegas in June - the P6000.</p>
<p>I just opened a discussion on the ITRC forum, maybe we'll see some more posts there. I myself am hoping for some thin provisioning or why not SAS backends …</p>
                <a class="readmore" href="/next-generation-eva-p6000.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://wtangy.se">Was There an NHL Game Yesterday?</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/martbhell">martbhell</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>