<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>There is IT in Helsinki - storage</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="There is IT in Helsinki Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">There is IT in Helsinki</a></h1>
                <nav><ul>
                    <li><a href="/category/finland.html">finland</a></li>
                    <li><a href="/category/it.html">it</a></li>
                    <li class="active"><a href="/category/storage.html">storage</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/non-brocade-branded-usb-stick-activation.html">"Non Brocade Branded USB stick activation"</a></h1>
<footer class="post-info">
        <abbr class="published" title="2020-09-17T00:00:00+03:00">
                Published: "2020-09-17"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/storage.html">storage</a>.</p>
<p>tags: <a href="/tag/brocade.html">brocade</a> <a href="/tag/usb.html">usb</a> </p>
</footer><!-- /.post-info --><p>Another submission courtesy of <strong>Eberhard</strong>.</p>
<p>Run anything here at your own risk. From what I can tell they should be fairly safe. Do make sure you run them on the switch itself. Pretty nice in case you don't want to shell out for a Brocade branded USB stick to transfer firmwares!</p>
<p>Hi,</p>
<p><em>I found a description how to format a USB-Stick that could be accessed<br>
by the brocade OS.</em></p>
<p>In fact after some investigation I noticed an error of this description<br>
that prevents to<br>
access this special configured stick.</p>
<p>To make life easier I modified the /sbin/hotplug script by adding one line.<br>
Now any USB-Stick may be used for installation or backup purposes.</p>
<p>The modified hotplug script adds the VENDOR string to<br>
/etc/fabos/usbstorage.conf if the vendor is unknown.<br>
If you redo the "usbstorage -e" command the previously unknown Vendor<br>
stick is been recognized by hotplug<br>
and the activation of the access succeeds!</p>
<p>It might be annoying to do the activation of a stick twice but this has<br>
to be done only if the vendor of the<br>
usb-stick is new for your brocade switch.</p>
<p>Fabos is capable to handle VFAT32-formatted sticks.</p>
<p>The stick needs 5 directories (1 and 4 children):<br>
/brocade/<br>
/brocade/config<br>
/brocade/firmware<br>
/brocade/firmwarekey<br>
/brocade/support</p>
<p>Here is the diff</p>
<blockquote>
<p># diff hotplug.orig hotplug<br>
62c62<br>
&lt;<br>
--- 
 &gt;     echo "VENDOR $vendor" &gt;&gt; $USBCONFIG<br>
63a64<br>
 &gt;</p>
<p>The above output means - "Add the 'echo ... ' bit on line 62"</p>
</blockquote>
<p>All stuff is been tested with FOS v7.4.2f.</p>
<p>Insert stick in a switch and run this script as root:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash -x</span>
insmod<span class="w"> </span>/lib/modules/default/kernel/drivers/usb/core/usbcore.ko
insmod<span class="w"> </span>/lib/modules/default/kernel/drivers/usb/host/hcd-driver.ko
insmod<span class="w"> </span>/lib/modules/default/kernel/drivers/usb/storage/usb-storage.ko
sleep<span class="w"> </span><span class="m">10</span>
lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>usb
/bin/mknod<span class="w"> </span>-m<span class="w"> </span><span class="m">660</span><span class="w"> </span>/dev/sda<span class="w"> </span>b<span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span>
/bin/mknod<span class="w"> </span>-m<span class="w"> </span><span class="m">660</span><span class="w"> </span>/dev/sda1<span class="w"> </span>b<span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">1</span>
/bin/mknod<span class="w"> </span>-m<span class="w"> </span><span class="m">660</span><span class="w"> </span>/dev/sda2<span class="w"> </span>b<span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>

<p>Sometimes the above script fails and you need to run it until it has usb_storage and usbcore modules listed as loaded kernel modules.</p>
<p>Now I can mount an ext3 formatted USB-stick:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># mkdir /usb_ext3</span>

<span class="c1"># mount -t ext3 /dev/sda1 /usb_ext3</span>

<span class="c1"># ls /usb_ext3/</span>

<span class="n">bin</span><span class="o">/</span><span class="w">         </span><span class="n">dev</span><span class="o">/</span><span class="w">     </span><span class="n">fabos</span><span class="o">/</span><span class="w">   </span><span class="n">libexec</span><span class="err">@</span><span class="w">  </span><span class="n">sbin</span><span class="o">/</span><span class="w">           </span><span class="n">tftpboot</span><span class="o">/</span><span class="w"> </span><span class="k">var</span><span class="o">/</span>
<span class="n">boot</span><span class="o">/</span><span class="w">        </span><span class="n">diag</span><span class="err">@</span><span class="w">    </span><span class="n">import</span><span class="o">/</span><span class="w">  </span><span class="n">mnt</span><span class="o">/</span><span class="w">      </span><span class="n">share</span><span class="err">@</span><span class="w">          </span><span class="n">tmp</span><span class="o">/</span>
<span class="n">config</span><span class="o">/</span><span class="w">      </span><span class="n">etc</span><span class="o">/</span><span class="w">     </span><span class="n">initrd</span><span class="o">/</span><span class="w">  </span><span class="n">proc</span><span class="o">/</span><span class="w">     </span><span class="n">standby_sbin</span><span class="o">/</span><span class="w">   </span><span class="n">users</span><span class="o">/</span>
<span class="n">core_files</span><span class="o">/</span><span class="w">  </span><span class="k">export</span><span class="o">/</span><span class="w">  </span><span class="n">lib</span><span class="o">/</span><span class="w">     </span><span class="n">root</span><span class="o">/</span><span class="w">     </span><span class="n">support_files</span><span class="o">/</span><span class="w">  </span><span class="n">usr</span><span class="o">/</span>

<span class="c1"># mkdir /usb_vfat</span>

<span class="c1"># mount -t vfat /dev/sda1 /usb_vfat</span>

<span class="c1"># ls /usb_vfat/</span>
<span class="o">.</span><span class="n">Trash</span><span class="o">-</span><span class="mi">1000</span><span class="o">/</span><span class="w">  </span><span class="n">brocade</span><span class="o">/</span><span class="w">  </span><span class="n">config</span><span class="o">/</span><span class="w">  </span><span class="n">firmware</span><span class="o">/</span><span class="w">  </span><span class="n">firmwarekey</span><span class="o">/</span><span class="w">  </span><span class="n">hda1</span><span class="o">.</span><span class="n">dmp</span><span class="o">*</span><span class="w"> </span><span class="n">support</span><span class="o">/</span>
</code></pre></div>

<p>I'll stop here at the moment because now I need to know how u-boot<br>
starts an OS from an USB-stick...</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/brocade-cf-replacement-hints.html" rel="bookmark"
                           title="Permalink to "Brocade CF Replacement Hints"">"Brocade CF Replacement Hints"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-09-13T00:00:00+03:00">
                Published: "2020-09-13"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/storage.html">storage</a>.</p>
<p>tags: <a href="/tag/brocade.html">brocade</a> <a href="/tag/fc.html">fc</a> <a href="/tag/fibre.html">fibre</a> <a href="/tag/channel.html">channel</a> <a href="/tag/san.html">san</a> <a href="/tag/network.html">network</a> </p>
</footer><!-- /.post-info -->                <p>This post is based on a submission from a reader of this blog <strong>Eberhard</strong>, maybe primarily of the popular <a href="https://www.guldmyr.com/blog/brocade-san-switch-firmware-upgrades/">Brocade SAN upgrades</a> post. Many thanks for this, hoping it will help someone out there!</p>
<p>The topic here is how to replace the embedded Compact Flash card if that breaks.</p>
<p>You …</p>
                <a class="readmore" href="/brocade-cf-replacement-hints.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/wasthereannhlgamelastnightcom-now-using-object-storage.html" rel="bookmark"
                           title="Permalink to "wasthereannhlgamelastnight.com - now using object storage!"">"wasthereannhlgamelastnight.com - now using object storage!"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-10-07T00:00:00+03:00">
                Published: "2017-10-07"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/cloud.html">cloud</a> <a href="/tag/gcloud.html">gcloud</a> <a href="/tag/google.html">google</a> <a href="/tag/nhl.html">nhl</a> <a href="/tag/programming.html">programming</a> <a href="/tag/wasthereannhlgamelastnight.html">wasthereannhlgamelastnight</a> </p>
</footer><!-- /.post-info -->                <p>To continue this series of blog posts about the awesome <a href="https://wasthereannhlgamelastnight.appspot.com/WINGS">https://wasthereannhlgamelastnight.appspot.com/WINGS</a> web site where you can see if there was in fact, an <a href="http://nhl.com/schedule">NHL</a> game last night :)</p>
<p>Some background: First I had a python script that scraped the website of nhl.com and later changed that …</p>
                <a class="readmore" href="/wasthereannhlgamelastnightcom-now-using-object-storage.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/check_irods-nagios-plugin-to-check-the-functionality-of-an-irods-server.html" rel="bookmark"
                           title="Permalink to "check_irods - nagios plugin to check the functionality of an iRODS server"">"check_irods - nagios plugin to check the functionality of an iRODS server"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-31T00:00:00+03:00">
                Published: "2015-03-31"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/irods.html">irods</a> <a href="/tag/monitoring.html">monitoring</a> <a href="/tag/nagios.html">nagios</a> </p>
</footer><!-- /.post-info -->                <p>Part of my $dayjob as a sysadmin is to monitor all things.</p>
<p>Today I felt like checking if the users on our servers could use the local iRODS storage and thus check_irods was born!</p>
<p>It checks if it can:</p>
<ol>
<li>put</li>
<li>list</li>
<li>get</li>
<li>remove</li>
</ol>
<p>a temporary file.</p>
<p>Dependencies:</p>
<ul>
<li>iRODS 3.2 …</li></ul>
                <a class="readmore" href="/check_irods-nagios-plugin-to-check-the-functionality-of-an-irods-server.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/nagios-health-check-of-a-ddn-sfa12k.html" rel="bookmark"
                           title="Permalink to "Nagios Health Check of a DDN SFA12K"">"Nagios Health Check of a DDN SFA12K"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-01-18T00:00:00+02:00">
                Published: "2015-01-18"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/ddn.html">ddn</a> <a href="/tag/monitoring.html">monitoring</a> <a href="/tag/nagios.html">nagios</a> <a href="/tag/sfa12k.html">sfa12k</a> </p>
</footer><!-- /.post-info -->                <p>Part of my $dayjob as a sysadmin is to monitor all things.</p>
<p>I'll be publishing my home-made nagios checks on github in the near future.</p>
<p>Here is the first one that uses the Web API of a DDN's <a href="http://www.ddn.com/products/storage-platform-sfa12kx/" title="ddn.com product info">SFA12K</a> (might work on the 10k too, haven't tried) which is a …</p>
                <a class="readmore" href="/nagios-health-check-of-a-ddn-sfa12k.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/high-amount-of-load_cycle_count-on-green-western-digital-disks.html" rel="bookmark"
                           title="Permalink to "High amount of Load_Cycle_Count on Green Western Digital disks"">"High amount of Load_Cycle_Count on Green Western Digital disks"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-26T00:00:00+03:00">
                Published: "2014-10-26"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/idl3ctl.html">idl3ctl</a> <a href="/tag/llc.html">llc</a> <a href="/tag/load_cycle_count.html">load_cycle_count</a> <a href="/tag/ubuntu.html">ubuntu</a> <a href="/tag/wd.html">wd</a> <a href="/tag/wdidle3.html">wdidle3</a> <a href="/tag/exe.html">exe</a> <a href="/tag/western.html">western</a> <a href="/tag/digital.html">digital</a> </p>
</footer><!-- /.post-info -->                <p>You are monitoring the SMART values of your disks right? They're usually a real good indicator of the health of the drive.</p>
<p>Thought I'd check out the SMART value of the disks in my desktop today (while checking if I had notifications from smartd on).</p>
<p>Low and behold, the Load_Cycle_Count …</p>
                <a class="readmore" href="/high-amount-of-load_cycle_count-on-green-western-digital-disks.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/lustre-25-centos6-test-in-openstack.html" rel="bookmark"
                           title="Permalink to "Lustre 2.5 + CentOS6 Test in OpenStack"">"Lustre 2.5 + CentOS6 Test in OpenStack"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-05-30T00:00:00+03:00">
                Published: "2014-05-30"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/storage.html">storage</a>.</p>
<p>tags: <a href="/tag/centos.html">centos</a> <a href="/tag/linux.html">linux</a> <a href="/tag/lustre.html">lustre</a> <a href="/tag/openstack.html">openstack</a> </p>
</footer><!-- /.post-info -->                <p>Reason: Testing to Lustre 2.5 from a clean CentOS 6.5 install in an openstack.</p>
<p>Three VMs: two servers, one MDS, one OSS and one Client. CentOS65 on all. An open internal ethernet network for the lustre traffic (don't forget firewalls). Yum updated to latest kernel. Two volumes presented …</p>
                <a class="readmore" href="/lustre-25-centos6-test-in-openstack.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/brocade-certified-professional-data-center-track-check.html" rel="bookmark"
                           title="Permalink to "Brocade Certified Professional Data Center Track - Check!"">"Brocade Certified Professional Data Center Track - Check!"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-04-02T00:00:00+03:00">
                Published: "2014-04-02"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/bcfa.html">bcfa</a> <a href="/tag/bcfd.html">bcfd</a> <a href="/tag/bcfp.html">bcfp</a> <a href="/tag/bcpcn.html">bcpcn</a> <a href="/tag/bcpdc.html">bcpdc</a> <a href="/tag/bcpf.html">bcpf</a> <a href="/tag/bcpi.html">bcpi</a> <a href="/tag/bna.html">bna</a> <a href="/tag/brocade.html">brocade</a> <a href="/tag/certified.html">certified</a> <a href="/tag/certification.html">certification</a> <a href="/tag/network.html">network</a> <a href="/tag/advisor.html">advisor</a> <a href="/tag/studying.html">studying</a> </p>
</footer><!-- /.post-info -->                <p>After ~49 posts on this blog on the topic Brocade the first larger block is finally complete: the Brocade Certified Professional Data Center Track (<strong>BCPDC</strong>)!</p>
<p>What's that? So Brocade has several (4) tracks which consist of  certifications/accrediations, some are shared between the tracks and some are only in one …</p>
                <a class="readmore" href="/brocade-certified-professional-data-center-track-check.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/banas-brocade-certification-studying.html" rel="bookmark"
                           title="Permalink to "BANAS - Brocade Certification - Studying"">"BANAS - Brocade Certification - Studying"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-03-30T00:00:00+02:00">
                Published: "2014-03-30"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/bna.html">bna</a> <a href="/tag/brocade.html">brocade</a> <a href="/tag/certification.html">certification</a> <a href="/tag/network.html">network</a> <a href="/tag/advisor.html">advisor</a> <a href="/tag/studying.html">studying</a> </p>
</footer><!-- /.post-info -->                <p>I'm going to focus on the below things when studying for BANAS: They are based on the current objectives listed on Brocade's <a href="http://www.brocade.com/education/certification-accreditation/accredited-network-advisor-specialist/index.page" title="http://www.brocade.com/education/certification-accreditation/accredited-network-advisor-specialist/index.page">page</a>.</p>
<h2>Brocade Accredited Network Advisor Specialist Exam Topics</h2>
<ul>
<li>The Brocade Accredited Network Advisor Specialist exam has these objectives:</li>
</ul>
<h3>Product Features</h3>
<ul>
<li>Demonstrate knowledge of Brocade Network Advisor product features …</li></ul>
                <a class="readmore" href="/banas-brocade-certification-studying.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/vyatta-a-routervpnfirewall-in-a-vm.html" rel="bookmark"
                           title="Permalink to "Vyatta: a router/vpn/firewall in a VM"">"Vyatta: a router/vpn/firewall in a VM"</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-08-26T00:00:00+03:00">
                Published: "2013-08-26"
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/johan-guldmyr.html">Johan Guldmyr</a>
        </address>
<p>In <a href="/category/it.html">it</a>.</p>
<p>tags: <a href="/tag/bcvre.html">bcvre</a> <a href="/tag/brocade.html">brocade</a> <a href="/tag/certified.html">certified</a> <a href="/tag/exam.html">exam</a> <a href="/tag/open.html">open</a> <a href="/tag/source.html">source</a> <a href="/tag/virtualization.html">virtualization</a> </p>
</footer><!-- /.post-info -->                <p>Brocade has a beta exam up for <a href="http://community.brocade.com/docs/DOC-3336">BCVRE</a> - Certified vRouter Engineer - which is on the Vyatta software from the company with the same name that Brocade bought last year.</p>
<p>There is the free open source core. Download from here: <a href="http://vyatta.org/downloads?whence=">http://vyatta.org/downloads</a> (no you don't have to register).  The …</p>
                <a class="readmore" href="/vyatta-a-routervpnfirewall-in-a-vm.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 8
        <a href="/category/storage2.html">&raquo;</a>
        <a href="/category/storage8.html">&#8649;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://wtangy.se">Was There an NHL Game Yesterday?</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/martbhell">martbhell</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>